<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>小熊貓亞種比較</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@400;500;700;900&display=swap" rel="stylesheet"/>
<script id="tailwind-config">
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                colors: {
                    "primary": "#ec6d13",
                    "background-light": "#f8f7f6",
                    "background-dark": "#221810",
                },
                fontFamily: {
                    "display": ["Epilogue"]
                },
                borderRadius: { "DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px" },
                animation: {
                    'fade-in': 'fadeIn 0.5s ease-in-out',
                    'slide-up': 'slideUp 0.3s ease-out',
                }
            },
        },
    }
</script>
<style>
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    @keyframes slideUp {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    body {
        min-height: max(884px, 100dvh);
    }
    .tab-content > div {
        display: none;
    }
    .tab-content > div.active {
        display: block;
        animation: fade-in 0.3s ease-in-out;
    }
    .loading-shimmer {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
    }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-background-dark dark:text-background-light">
<div class="relative flex min-h-screen w-full flex-col justify-between overflow-x-hidden">
<div class="flex-grow">
<header class="sticky top-0 z-10 flex items-center justify-between bg-background-light/80 p-4 pb-3 backdrop-blur-sm dark:bg-background-dark/80">
<button onclick="history.back()" class="text-background-dark dark:text-background-light hover:text-primary transition-colors">
<svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
</svg>
</button>
<h1 class="text-lg font-bold">亞種差異</h1>
<div class="w-6"></div>
</header>

<main class="p-4">
    <!-- 載入提示 -->
    <div id="loading" class="text-center py-8">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
        <p class="mt-2 text-sm">載入中...</p>
    </div>

    <!-- 主要內容 -->
    <div id="main-content" class="hidden">
        <!-- Tab 按鈕 -->
        <div class="flex justify-around mb-6">
            <button class="tab-btn active px-4 py-2 rounded-lg bg-primary text-white font-semibold transition-all duration-200 hover:bg-primary/90" data-tab="appearance">外觀</button>
            <button class="tab-btn px-4 py-2 rounded-lg text-background-dark dark:text-background-light font-semibold hover:bg-primary/10 transition-all duration-200" data-tab="distribution">分佈</button>
            <button class="tab-btn px-4 py-2 rounded-lg text-background-dark dark:text-background-light font-semibold hover:bg-primary/10 transition-all duration-200" data-tab="behavior">習性</button>
        </div>

        <!-- Tab 內容 -->
        <div class="tab-content">
            <!-- 外觀標籤 -->
            <div id="appearance" class="active">
                <section class="rounded-xl overflow-hidden bg-white dark:bg-zinc-800/20 mb-6 shadow-lg">
                    <div class="p-6">
                        <h2 class="text-xl font-bold mb-4 text-primary">外觀特徵</h2>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="relative aspect-square rounded-lg overflow-hidden">
                                <img id="chinese-image" alt="中華小熊貓" class="object-cover w-full h-full transition-transform duration-300 hover:scale-105" />
                            </div>
                            <div class="relative aspect-square rounded-lg overflow-hidden">
                                <img id="himalayan-image" alt="喜馬拉雅小熊貓" class="object-cover w-full h-full transition-transform duration-300 hover:scale-105" />
                            </div>
                        </div>
                    </div>
                    <div class="bg-background-light dark:bg-zinc-800/10 px-6 py-4">
                        <div class="grid grid-cols-2 gap-4 text-center">
                            <div id="chinese-appearance">
                                <h3 class="font-bold text-lg mb-1">中華小熊貓</h3>
                                <p class="text-sm text-background-dark/70 dark:text-background-light/70 mb-2">Ailurus fulgens styani</p>
                                <div class="space-y-1 text-sm">
                                    <p><strong>體重：</strong><span id="chinese-weight"></span></p>
                                    <p><strong>毛色：</strong><span id="chinese-color"></span></p>
                                    <p><strong>尾紋：</strong><span id="chinese-tail"></span></p>
                                </div>
                            </div>
                            <div id="himalayan-appearance">
                                <h3 class="font-bold text-lg mb-1">喜馬拉雅小熊貓</h3>
                                <p class="text-sm text-background-dark/70 dark:text-background-light/70 mb-2">Ailurus fulgens fulgens</p>
                                <div class="space-y-1 text-sm">
                                    <p><strong>體重：</strong><span id="himalayan-weight"></span></p>
                                    <p><strong>毛色：</strong><span id="himalayan-color"></span></p>
                                    <p><strong>尾紋：</strong><span id="himalayan-tail"></span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- 分佈標籤 -->
            <div id="distribution">
                <section class="rounded-xl overflow-hidden bg-white dark:bg-zinc-800/20 mb-6 shadow-lg">
                    <div class="p-6">
                        <h2 class="text-xl font-bold mb-4 text-primary">棲息地分佈</h2>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold mb-2">🇨🇳 中華小熊貓</h4>
                                <div class="space-y-2 text-sm">
                                    <p><strong>地區：</strong><span id="chinese-location"></span></p>
                                    <p><strong>海拔：</strong><span id="chinese-elevation"></span></p>
                                    <p><strong>氣候：</strong><span id="chinese-climate"></span></p>
                                </div>
                            </div>
                            <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-lg">
                                <h4 class="font-semibold mb-2">🏔️ 喜馬拉雅小熊貓</h4>
                                <div class="space-y-2 text-sm">
                                    <p><strong>地區：</strong><span id="himalayan-location"></span></p>
                                    <p><strong>海拔：</strong><span id="himalayan-elevation"></span></p>
                                    <p><strong>氣候：</strong><span id="himalayan-climate"></span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- 習性標籤 -->
            <div id="behavior">
                <section class="rounded-xl overflow-hidden bg-white dark:bg-zinc-800/20 mb-6 shadow-lg">
                    <div class="p-6">
                        <h2 class="text-xl font-bold mb-4 text-primary">行為習性</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-4">
                                <h4 class="font-semibold text-center">🇨🇳 中華小熊貓</h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="font-medium">活動時間：</span>
                                        <span id="chinese-activity"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="font-medium">社會性：</span>
                                        <span id="chinese-social"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="font-medium">攀爬：</span>
                                        <span id="chinese-movement"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <h4 class="font-semibold text-center">🏔️ 喜馬拉雅小熊貓</h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="font-medium">活動時間：</span>
                                        <span id="himalayan-activity"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="font-medium">社會性：</span>
                                        <span id="himalayan-social"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="font-medium">攀爬：</span>
                                        <span id="himalayan-movement"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- 測驗按鈕 -->
        <div class="mt-8 text-center">
            <button onclick="window.location.href='quiz.html'" class="bg-gradient-to-r from-primary to-orange-600 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 animate-slide-up">
                🧩 開始測驗挑戰
            </button>
            <p class="text-sm text-background-dark/60 dark:text-background-light/60 mt-2">測試你是否真的了解兩個亞種的差異！</p>
        </div>
    </div>
</main>
</div>

<div id="navbar-container"></div>
</div>

<script>
// Tab 切換功能
const tabButtons = document.querySelectorAll('.tab-btn');
const tabContents = document.querySelectorAll('.tab-content > div');

tabButtons.forEach(button => {
    button.addEventListener('click', () => {
        // 移除所有按鈕的 active 狀態
        tabButtons.forEach(btn => {
            btn.classList.remove('active', 'bg-primary', 'text-white');
            btn.classList.add('text-background-dark', 'dark:text-background-light');
        });
        tabContents.forEach(content => content.classList.remove('active'));

        // 設置當前按鈕為 active
        button.classList.add('active', 'bg-primary', 'text-white');
        button.classList.remove('text-background-dark', 'dark:text-background-light');

        // 顯示對應內容
        const targetTab = button.getAttribute('data-tab');
        document.getElementById(targetTab).classList.add('active');
    });
});

// 載入 JSON 資料
async function loadSubspeciesData() {
    try {
        console.log('正在載入數據從:', '../../data/subspecies.json');
        const response = await fetch('../../data/subspecies.json');

        console.log('HTTP 狀態:', response.status);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();

        const chinese = data.subspecies.find(sub => sub.id === 'chinese');
        const himalayan = data.subspecies.find(sub => sub.id === 'himalayan');

        // 更新圖片（修正路徑）
        const fixImagePath = (imagePath) => {
            if (imagePath.startsWith('./images/')) {
                return imagePath.replace('./images/', '../images/');
            }
            return imagePath;
        };

        document.getElementById('chinese-image').src = fixImagePath(chinese.image);
        document.getElementById('himalayan-image').src = fixImagePath(himalayan.image);

        // 更新外觀資訊
        document.getElementById('chinese-weight').textContent = chinese.characteristics.body_size.weight;
        document.getElementById('chinese-color').textContent = chinese.characteristics.appearance.fur_color;
        document.getElementById('chinese-tail').textContent = chinese.characteristics.appearance.tail_rings;

        document.getElementById('himalayan-weight').textContent = himalayan.characteristics.body_size.weight;
        document.getElementById('himalayan-color').textContent = himalayan.characteristics.appearance.fur_color;
        document.getElementById('himalayan-tail').textContent = himalayan.characteristics.appearance.tail_rings;

        // 更新分佈資訊
        document.getElementById('chinese-location').textContent = chinese.characteristics.habitat.location;
        document.getElementById('chinese-elevation').textContent = chinese.characteristics.habitat.elevation;
        document.getElementById('chinese-climate').textContent = chinese.characteristics.habitat.climate;

        document.getElementById('himalayan-location').textContent = himalayan.characteristics.habitat.location;
        document.getElementById('himalayan-elevation').textContent = himalayan.characteristics.habitat.elevation;
        document.getElementById('himalayan-climate').textContent = himalayan.characteristics.habitat.climate;

        // 更新行為資訊
        document.getElementById('chinese-activity').textContent = chinese.characteristics.behavior.activity_pattern;
        document.getElementById('chinese-social').textContent = chinese.characteristics.behavior.social;
        document.getElementById('chinese-movement').textContent = chinese.characteristics.behavior.movement;

        document.getElementById('himalayan-activity').textContent = himalayan.characteristics.behavior.activity_pattern;
        document.getElementById('himalayan-social').textContent = himalayan.characteristics.behavior.social;
        document.getElementById('himalayan-movement').textContent = himalayan.characteristics.behavior.movement;

        // 隱藏載入提示，顯示主要內容
        document.getElementById('loading').classList.add('hidden');
        document.getElementById('main-content').classList.remove('hidden');

    } catch (error) {
        console.error('載入數據失敗:', error);
        document.getElementById('loading').innerHTML = '<p class="text-red-500">載入失敗，請重新整理頁面</p>';
    }
}

// 頁面載入完成後執行
document.addEventListener('DOMContentLoaded', loadSubspeciesData);
</script>
<script src="assets/js/navbar.js"></script>
</body>
</html>
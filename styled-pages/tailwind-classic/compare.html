<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>小熊貓亞種比較</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@400;500;700;900&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="assets/css/styles.css">
<script id="tailwind-config">
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                colors: {
                    "primary": "#ec6d13",
                    "background-light": "#f8f7f6",
                    "background-dark": "#221810",
                },
                fontFamily: {
                    "display": ["Epilogue"]
                },
                borderRadius: { "DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px" },
                animation: {
                    'fade-in': 'fadeIn 0.5s ease-in-out',
                    'slide-up': 'slideUp 0.3s ease-out',
                }
            },
        },
    }
</script>
<style>
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    @keyframes slideUp {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    body {
        min-height: max(884px, 100dvh);
    }
    .tab-content > div {
        display: none;
    }
    .tab-content > div.active {
        display: block;
        animation: fade-in 0.3s ease-in-out;
    }
    .loading-shimmer {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
    }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-background-dark dark:text-background-light">
<div class="relative flex min-h-screen w-full flex-col justify-between overflow-x-hidden">
<div class="flex-grow">
<main class="p-4 pt-6">
    <!-- 載入提示 -->
    <div id="loading" class="text-center py-8">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
        <p class="mt-2 text-sm">載入中...</p>
    </div>

    <!-- 主要內容 -->
    <div id="main-content" class="hidden">
        <!-- Tab 按鈕 -->
        <div class="flex justify-around mb-8 gap-2">
            <button class="tab-btn active px-6 py-3 rounded-lg bg-primary text-white font-semibold transition-all duration-200 hover:bg-primary/90 min-h-12" data-tab="appearance">外觀</button>
            <button class="tab-btn px-6 py-3 rounded-lg text-background-dark dark:text-background-light font-semibold hover:bg-primary/10 transition-all duration-200 min-h-12" data-tab="distribution">分佈</button>
            <button class="tab-btn px-6 py-3 rounded-lg text-background-dark dark:text-background-light font-semibold hover:bg-primary/10 transition-all duration-200 min-h-12" data-tab="behavior">習性</button>
        </div>

        <!-- Tab 內容 -->
        <div class="tab-content">
            <!-- 外觀標籤 -->
            <div id="appearance" class="active">
                <div class="space-y-6">
                    <!-- 中華小熊貓卡片 -->
                    <div class="bg-white dark:bg-zinc-800/20 rounded-xl shadow-lg overflow-hidden">
                        <div class="relative h-48 bg-gradient-to-br from-orange-100 to-orange-50 dark:from-orange-900/30 dark:to-orange-800/20">
                            <img id="chinese-image" alt="中華小熊貓" class="absolute inset-0 w-full h-full object-cover" />
                            <div class="absolute top-4 left-4 bg-white/90 dark:bg-black/70 px-3 py-1 rounded-full">
                                <span class="text-sm font-semibold text-primary">🇨🇳 中華小熊貓</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">Ailurus fulgens styani</h3>
                            <div class="grid grid-cols-2 gap-4 text-base">
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-lg">⚖️</span>
                                        <div>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">體重</div>
                                            <div class="font-semibold" id="chinese-weight"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-lg">🎨</span>
                                        <div>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">毛色</div>
                                            <div class="font-semibold" id="chinese-color"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4 flex items-center space-x-2">
                                <span class="text-lg">🦘</span>
                                <div>
                                    <div class="text-sm text-gray-600 dark:text-gray-400">尾紋特徵</div>
                                    <div class="font-semibold" id="chinese-tail"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 喜馬拉雅小熊貓卡片 -->
                    <div class="bg-white dark:bg-zinc-800/20 rounded-xl shadow-lg overflow-hidden">
                        <div class="relative h-48 bg-gradient-to-br from-purple-100 to-blue-50 dark:from-purple-900/30 dark:to-blue-800/20">
                            <img id="himalayan-image" alt="喜馬拉雅小熊貓" class="absolute inset-0 w-full h-full object-cover" />
                            <div class="absolute top-4 left-4 bg-white/90 dark:bg-black/70 px-3 py-1 rounded-full">
                                <span class="text-sm font-semibold text-primary">🏔️ 喜馬拉雅小熊貓</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">Ailurus fulgens fulgens</h3>
                            <div class="grid grid-cols-2 gap-4 text-base">
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-lg">⚖️</span>
                                        <div>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">體重</div>
                                            <div class="font-semibold" id="himalayan-weight"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-lg">🎨</span>
                                        <div>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">毛色</div>
                                            <div class="font-semibold" id="himalayan-color"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4 flex items-center space-x-2">
                                <span class="text-lg">🦘</span>
                                <div>
                                    <div class="text-sm text-gray-600 dark:text-gray-400">尾紋特徵</div>
                                    <div class="font-semibold" id="himalayan-tail"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 分佈標籤 -->
            <div id="distribution">
                <div class="space-y-6">
                    <!-- 中華小熊貓分布卡片 -->
                    <div class="bg-gradient-to-br from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-xl p-6 border border-blue-200/50 dark:border-blue-700/30">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-blue-100 dark:bg-blue-800/30 rounded-full flex items-center justify-center mr-4">
                                <span class="text-2xl">🇨🇳</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-blue-800 dark:text-blue-300">中華小熊貓</h3>
                                <p class="text-sm text-blue-600 dark:text-blue-400">Ailurus fulgens styani</p>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div class="bg-white/60 dark:bg-black/20 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <span class="text-lg mr-2">🌍</span>
                                    <span class="font-semibold text-blue-800 dark:text-blue-300">分布地區</span>
                                </div>
                                <p class="text-base" id="chinese-location"></p>
                            </div>

                            <div class="bg-white/60 dark:bg-black/20 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <span class="text-lg mr-2">⛰️</span>
                                    <span class="font-semibold text-blue-800 dark:text-blue-300">海拔高度</span>
                                </div>
                                <p class="text-base" id="chinese-elevation"></p>
                            </div>

                            <div class="bg-white/60 dark:bg-black/20 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <span class="text-lg mr-2">🌤️</span>
                                    <span class="font-semibold text-blue-800 dark:text-blue-300">氣候條件</span>
                                </div>
                                <p class="text-base" id="chinese-climate"></p>
                            </div>
                        </div>
                    </div>

                    <!-- 喜馬拉雅小熊貓分布卡片 -->
                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200/50 dark:border-purple-700/30">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-purple-100 dark:bg-purple-800/30 rounded-full flex items-center justify-center mr-4">
                                <span class="text-2xl">🏔️</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-purple-800 dark:text-purple-300">喜馬拉雅小熊貓</h3>
                                <p class="text-sm text-purple-600 dark:text-purple-400">Ailurus fulgens fulgens</p>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div class="bg-white/60 dark:bg-black/20 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <span class="text-lg mr-2">🌍</span>
                                    <span class="font-semibold text-purple-800 dark:text-purple-300">分布地區</span>
                                </div>
                                <p class="text-base" id="himalayan-location"></p>
                            </div>

                            <div class="bg-white/60 dark:bg-black/20 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <span class="text-lg mr-2">⛰️</span>
                                    <span class="font-semibold text-purple-800 dark:text-purple-300">海拔高度</span>
                                </div>
                                <p class="text-base" id="himalayan-elevation"></p>
                            </div>

                            <div class="bg-white/60 dark:bg-black/20 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <span class="text-lg mr-2">🌤️</span>
                                    <span class="font-semibold text-purple-800 dark:text-purple-300">氣候條件</span>
                                </div>
                                <p class="text-base" id="himalayan-climate"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 習性標籤 -->
            <div id="behavior">
                <div class="space-y-6">
                    <!-- 中華小熊貓習性卡片 -->
                    <div class="bg-white dark:bg-zinc-800/20 rounded-xl shadow-lg overflow-hidden border-l-4 border-orange-400">
                        <div class="p-6">
                            <div class="flex items-center mb-6">
                                <div class="w-14 h-14 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mr-4">
                                    <span class="text-3xl">🇨🇳</span>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-orange-600 dark:text-orange-400">中華小熊貓</h3>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">行為習性特徵</p>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div class="bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-xl mr-3">🌙</span>
                                            <span class="font-semibold text-orange-800 dark:text-orange-300">活動時間</span>
                                        </div>
                                        <span class="text-base font-medium" id="chinese-activity"></span>
                                    </div>
                                </div>

                                <div class="bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-xl mr-3">👥</span>
                                            <span class="font-semibold text-orange-800 dark:text-orange-300">社會性</span>
                                        </div>
                                        <span class="text-base font-medium" id="chinese-social"></span>
                                    </div>
                                </div>

                                <div class="bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-xl mr-3">🧗</span>
                                            <span class="font-semibold text-orange-800 dark:text-orange-300">攀爬能力</span>
                                        </div>
                                        <span class="text-base font-medium" id="chinese-movement"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 喜馬拉雅小熊貓習性卡片 -->
                    <div class="bg-white dark:bg-zinc-800/20 rounded-xl shadow-lg overflow-hidden border-l-4 border-indigo-400">
                        <div class="p-6">
                            <div class="flex items-center mb-6">
                                <div class="w-14 h-14 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center mr-4">
                                    <span class="text-3xl">🏔️</span>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-indigo-600 dark:text-indigo-400">喜馬拉雅小熊貓</h3>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">行為習性特徵</p>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-xl mr-3">🌙</span>
                                            <span class="font-semibold text-indigo-800 dark:text-indigo-300">活動時間</span>
                                        </div>
                                        <span class="text-base font-medium" id="himalayan-activity"></span>
                                    </div>
                                </div>

                                <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-xl mr-3">👥</span>
                                            <span class="font-semibold text-indigo-800 dark:text-indigo-300">社會性</span>
                                        </div>
                                        <span class="text-base font-medium" id="himalayan-social"></span>
                                    </div>
                                </div>

                                <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-xl mr-3">🧗</span>
                                            <span class="font-semibold text-indigo-800 dark:text-indigo-300">攀爬能力</span>
                                        </div>
                                        <span class="text-base font-medium" id="himalayan-movement"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 測驗按鈕 -->
        <div class="mt-8 text-center">
            <button onclick="window.location.href='quiz.html'" class="bg-gradient-to-r from-primary to-orange-600 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 animate-slide-up">
                🧩 開始測驗挑戰
            </button>
            <p class="text-sm text-background-dark/60 dark:text-background-light/60 mt-2">測試你是否真的了解兩個亞種的差異！</p>
        </div>
    </div>
</main>
</div>

<div id="navbar-container"></div>
</div>

<script>
// Tab 切換功能
const tabButtons = document.querySelectorAll('.tab-btn');
const tabContents = document.querySelectorAll('.tab-content > div');

tabButtons.forEach(button => {
    button.addEventListener('click', () => {
        // 移除所有按鈕的 active 狀態
        tabButtons.forEach(btn => {
            btn.classList.remove('active', 'bg-primary', 'text-white');
            btn.classList.add('text-background-dark', 'dark:text-background-light');
        });
        tabContents.forEach(content => content.classList.remove('active'));

        // 設置當前按鈕為 active
        button.classList.add('active', 'bg-primary', 'text-white');
        button.classList.remove('text-background-dark', 'dark:text-background-light');

        // 顯示對應內容
        const targetTab = button.getAttribute('data-tab');
        document.getElementById(targetTab).classList.add('active');
    });
});

// 載入 JSON 資料
async function loadSubspeciesData() {
    try {
        console.log('正在載入數據從:', '../../data/subspecies.json');
        const response = await fetch('../../data/subspecies.json');

        console.log('HTTP 狀態:', response.status);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();

        const chinese = data.subspecies.find(sub => sub.id === 'chinese');
        const himalayan = data.subspecies.find(sub => sub.id === 'himalayan');

        // 更新圖片（修正路徑）
        const fixImagePath = (imagePath) => {
            if (imagePath.startsWith('./images/')) {
                return imagePath.replace('./images/', '../../images/');
            }
            return imagePath;
        };

        document.getElementById('chinese-image').src = fixImagePath(chinese.image);
        document.getElementById('himalayan-image').src = fixImagePath(himalayan.image);

        // 更新外觀資訊
        document.getElementById('chinese-weight').textContent = chinese.characteristics.body_size.weight;
        document.getElementById('chinese-color').textContent = chinese.characteristics.appearance.fur_color;
        document.getElementById('chinese-tail').textContent = chinese.characteristics.appearance.tail_rings;

        document.getElementById('himalayan-weight').textContent = himalayan.characteristics.body_size.weight;
        document.getElementById('himalayan-color').textContent = himalayan.characteristics.appearance.fur_color;
        document.getElementById('himalayan-tail').textContent = himalayan.characteristics.appearance.tail_rings;

        // 更新分佈資訊
        document.getElementById('chinese-location').textContent = chinese.characteristics.habitat.location;
        document.getElementById('chinese-elevation').textContent = chinese.characteristics.habitat.elevation;
        document.getElementById('chinese-climate').textContent = chinese.characteristics.habitat.climate;

        document.getElementById('himalayan-location').textContent = himalayan.characteristics.habitat.location;
        document.getElementById('himalayan-elevation').textContent = himalayan.characteristics.habitat.elevation;
        document.getElementById('himalayan-climate').textContent = himalayan.characteristics.habitat.climate;

        // 更新行為資訊
        document.getElementById('chinese-activity').textContent = chinese.characteristics.behavior.activity_pattern;
        document.getElementById('chinese-social').textContent = chinese.characteristics.behavior.social;
        document.getElementById('chinese-movement').textContent = chinese.characteristics.behavior.movement;

        document.getElementById('himalayan-activity').textContent = himalayan.characteristics.behavior.activity_pattern;
        document.getElementById('himalayan-social').textContent = himalayan.characteristics.behavior.social;
        document.getElementById('himalayan-movement').textContent = himalayan.characteristics.behavior.movement;

        // 隱藏載入提示，顯示主要內容
        document.getElementById('loading').classList.add('hidden');
        document.getElementById('main-content').classList.remove('hidden');

    } catch (error) {
        console.error('載入數據失敗:', error);
        document.getElementById('loading').innerHTML = '<p class="text-red-500">載入失敗，請重新整理頁面</p>';
    }
}

// 頁面載入完成後執行
document.addEventListener('DOMContentLoaded', loadSubspeciesData);
</script>
<script src="assets/js/navbar.js"></script>
</body>
</html>